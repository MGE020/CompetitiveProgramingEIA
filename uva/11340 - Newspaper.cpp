//
// Created by migav on 26/09/2022.
//

#include<cstdio>
#include <unordered_map>

using namespace std;

int main() {
    int cases, chars, val, lines;
    double ttl;
    char ch;
    scanf("%d", &cases);
    while(cases--) {
        unordered_map<char, int> map;
        ttl = 0;
        scanf("%d", &chars);
        while(chars--) {
            scanf(" %c %d", &ch, &val);
            map[ch] = val;
        }
        scanf("%d\n", &lines);
        while(lines--) {
            char text[10000];
            fgets(text, 10000, stdin);
            for(int i = 0; text[i] != 0; ++i) {
                ttl += map[text[i]];
            }
        }
        printf("%.2f$\n", ttl/100);
    }
}

